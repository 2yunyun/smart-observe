!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ob",e):t.ob=e()}(this,function(){"use strict";function t(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function e(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}function n(t){return H.call(t)===J}function i(t){return null!==t&&"object"===(void 0===t?"undefined":E(t))}function o(t){return"function"==typeof t}function r(t,e){for(var n=Object.keys(t),i=0,o=n.length;i<o;i++)e(n[i],t[n[i]])}function s(){}function u(t){Object.setPrototypeOf(t,U)}function a(t,e){return t>=this.length&&(this.length=Number(t)+1),this.splice(t,1,e)[0]}function c(t){if(this.length){var e=this.indexOf(t);return e>-1?this.splice(e,1):void 0}}function f(t){if(t&&"object"===(void 0===t?"undefined":E(t))){var e=void 0;return Object.prototype.hasOwnProperty.call(t,C)&&t[C]instanceof Z?e=t[C]:(B(t)||n(t))&&Object.isExtensible(t)&&(e=new Z(t)),e}}function l(t,n,i){function o(){var e=a?a.call(t):i;if(M.target&&(s.depend(),l&&l.dep.depend(),B(e)))for(var n,o=0,r=e.length;o<r;o++)(n=e[o])&&n[C]&&n[C].dep.depend();return e}function r(e){e!==(a?a.call(t):i)&&(c?c.call(t,e):i=e,l=f(e),s.notify())}var s=new M,u=Object.getOwnPropertyDescriptor(t,n);if(!u||!1!==u.configurable){var a=u&&u.get,c=u&&u.set,l=f(i);e(t,n,o,r)}}function h(t){try{return new Function("scope","return "+t+";")}catch(e){K("Invalid expression. Generated function body: "+t)}}function d(t){return t=String.prototype.trim.call(t),h("scope."+t)}function p(){tt=[],et={},nt=!1}function v(){y(tt),p()}function y(t){for(it=0;it<t.length;it++){var e=t[it],n=e.id;et[n]=null,e.run()}}function b(t){var e=t.id;null==et[e]&&(et[e]=tt.length,tt.push(t),nt||(nt=!0,ot(v)))}function g(t){var e=void 0,n=void 0;if(B(t))for(e=t.length;e--;)g(t[e]);else if(i(t))for(n=Object.keys(t),e=n.length;e--;)g(t[n[e]])}function w(t,e,n,i){var r=o(e)?e:d(e);return new st(t,r,n,i)}function m(t,e){var n=new st(t,e,null,{deep:O.deep,lazy:!0,sync:O.sync});return function(){return n.options.lazy&&M.target&&!M.target.options.lazy&&(n.options.lazy=!1,n.callback=function(){for(var t=n.deps,e=0,i=t.length;e<i;e++)t[e].notify()}),n.dirty&&n.evaluate(),M.target&&n.depend(),n.value}}function O(t,e,n,i){return t.hasOwnProperty(F)||S(t),O.default(t,e,n,i)}function k(t,e){return e?e.hasOwnProperty(F)||S(e):(e={},S(e)),t.methods&&I(e,t.methods),t.data&&P(e,t.data),t.computed&&A(e,t.computed),t.watchers&&x(e,t.watchers),e}function j(t,n,i,r){t.hasOwnProperty(F)||S(t);var u=void 0,a=void 0;o(i)?(u=!1!==r?m(t,i):i.bind(this),a=s):(u=i.get?!1!==i.cache||!1!==r?m(t,i.get):i.get.bind(this):s,a=i.set?i.set.bind(this):s),e(t,n,u,a)}function D(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O;return t.hasOwnProperty(F)||S(t),w(t,e,n,i)}function S(e){t(e,F,[],!1),t(e,V,Object.create(null),!1),f(e[V]),z(e)}function I(t,e){r(e,function(e,n){t[e]=n.bind(t)})}function _(t,e,n){t[V][e]=n,l(t[V],e,n),G(t,e)}function P(t,e){r(e,function(e,n){return _(t,e,n)})}function z(t){r(t,function(e,n){!o(n)&&_(t,e,n)})}function A(t,e){r(e,function(e,n){return j(t,e,n)})}function x(t,e){r(e,function(e,n){o(n)?D(t,e,n):D(t,e,n.watcher,n)})}function G(t,n){function i(){return t[V][n]}function o(e){t[V][n]=e}e(t,n,i,o)}var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),$=0,M=function(){function t(){N(this,t),this.id=$++,this.subs=[]}return T(t,[{key:"addSub",value:function(t){this.subs.push(t)}},{key:"removeSub",value:function(t){this.subs.$remove(t)}},{key:"depend",value:function(){t.target.addDep(this)}},{key:"notify",value:function(){for(var t=this.subs,e=0,n=t.length;e<n;e++)t[e].update()}}]),t}();M.target=null;var C="__ob__",F="__watchers__",V="__data__",q="undefined"!=typeof process&&"production"!==process.env.NODE_ENV,B=Array.isArray,H=Object.prototype.toString,J="[object Object]",K=void 0!==(void 0===q?"undefined":E(q))&&q&&"undefined"!=typeof console&&console&&o(console.warn)?console.warn:s,L=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?L=Set:(L=function(){this.set=Object.create(null)},L.prototype.has=function(t){return void 0!==this.set[t]},L.prototype.add=function(t){this.set[t]=1},L.prototype.clear=function(){this.set=Object.create(null)});for(var Q,R=Array.prototype,U=Object.create(R),W=["push","pop","shift","unshift","splice","sort","reverse"],X=0,Y=W.length;X<Y;Q=W[++X])!function(e,n,i){var o=R[i];t(U,i,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=o.apply(this,e),s=this[C],u=void 0;switch(i){case"push":case"unshift":u=e;break;case"splice":u=e.slice(2)}return u&&s.observeArray(u),s.dep.notify(),r})}(0,0,Q);t(R,"$set",a),t(R,"$remove",c);var Z=function(){function e(n){N(this,e),this.value=n,this.dep=new M,t(n,C,this),B(n)?(u(n),this.observeArray(n)):this.walk(n)}return T(e,[{key:"walk",value:function(t){var e=this;r(t,function(t,n){return e.convert(t,n)})}},{key:"observeArray",value:function(t){for(var e=0,n=t.length;e<n;e++)f(t[e])}},{key:"convert",value:function(t,e){l(this.value,t,e)}}]),e}(),tt=[],et={},nt=!1,it=void 0,ot=function(){function t(){n=!1;var t=e.slice(0);e=[];for(var i=0;i<t.length;i++)t[i]()}var e=[],n=!1,i=void 0;if("undefined"!=typeof MutationObserver){var o=1,r=new MutationObserver(t),s=document.createTextNode(o);r.observe(s,{characterData:!0}),i=function(){o=(o+1)%2,s.data=o}}else{var u="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),a=u?window:"undefined"!=typeof global?global:{};i=a.setImmediate||setTimeout}return function(o,r){var s=r?function(){o.call(r)}:o;e.push(s),n||(n=!0,i(t,0))}}(),rt=0,st=function(){function t(e,n,i,o){N(this,t),e[F].push(this),this.owner=e,this.getter=n,this.callback=i,this.options=o,this.id=++rt,this.active=!0,this.dirty=o.lazy,this.deps=[],this.newDeps=[],this.depIds=new L,this.newDepIds=new L,this.value=o.lazy?void 0:this.get()}return T(t,[{key:"get",value:function(){this.beforeGet();var t=this.owner,e=this.getter.call(t,t);return this.options.deep&&g(e),this.afterGet(),e}},{key:"beforeGet",value:function(){M.target=this}},{key:"addDep",value:function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))}},{key:"afterGet",value:function(){M.target=null;for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0}},{key:"update",value:function(){this.options.lazy?this.dirty=!0:this.options.sync?this.run():b(this)}},{key:"run",value:function(){if(this.active){var t=this.get();if(t!==this.value||i(t)||this.options.deep){var e=this.value;this.value=t,this.callback.call(this.owner,t,e)}}}},{key:"evaluate",value:function(){var t=M.target;this.value=this.get(),this.dirty=!1,M.target=t}},{key:"depend",value:function(){for(var t=this.deps.length;t--;)this.deps[t].depend()}},{key:"teardown",value:function(){if(this.active){for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1,this.owner=this.callback=this.value=null}}}]),t}();return O.default=D,O.deep=O.lazy=O.sync=!1,Object.setPrototypeOf(O,{react:k,compute:j,watch:D}),O});
//# sourceMappingURL=ob.min.js.map
