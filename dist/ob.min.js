!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ob",e):t.ob=e()}(this,function(){"use strict";function t(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function e(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,configurable:!0,enumerable:!0})}function n(t){return K.call(t)===L}function i(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":N(t))}function r(t){return"function"==typeof t}function o(t,e){for(var n=Object.keys(t),i=0,r=n.length;i<r;i++)e(n[i],t[n[i]])}function u(){}function s(t){Object.setPrototypeOf(t,U)}function a(t,e){return t>=this.length&&(this.length=Number(t)+1),this.splice(t,1,e)[0]}function c(t){if(this.length){var e=this.indexOf(t);return e>-1?this.splice(e,1):void 0}}function f(e){this.value=e,this.dep=new C,t(e,V,this),J(e)?(s(e),this.observeArray(e)):this.walk(e)}function l(t){if(t&&"object"===("undefined"==typeof t?"undefined":N(t))){var e=void 0;return Object.prototype.hasOwnProperty.call(t,V)&&t[V]instanceof f?e=t[V]:(J(t)||n(t))&&Object.isExtensible(t)&&(e=new f(t)),e}}function h(t,n,i){function r(){var e=a?a.call(t):i;if(C.target&&(u.depend(),f&&f.dep.depend(),J(e)))for(var n,r=0,o=e.length;r<o;r++)n=e[r],n&&n[V]&&n[V].dep.depend();return e}function o(e){var n=a?a.call(t):i;e!==n&&(c?c.call(t,e):i=e,f=l(e),u.notify())}var u=new C,s=Object.getOwnPropertyDescriptor(t,n);if(!s||s.configurable!==!1){var a=s&&s.get,c=s&&s.set,f=l(i);e(t,n,r,o)}}function p(t){try{return new Function("scope","return "+t+";")}catch(e){Q("Invalid expression. Generated function body: "+t)}}function d(t){return t=String.prototype.trim.call(t),p("scope."+t)}function v(){tt=[],et={},nt=!1}function y(){b(tt),v()}function b(t){for(it=0;it<t.length;it++){var e=t[it],n=e.id;et[n]=null,e.run()}}function w(t){var e=t.id;null==et[e]&&(et[e]=tt.length,tt.push(t),nt||(nt=!0,rt(y)))}function g(t){var e=void 0,n=void 0;if(J(t))for(e=t.length;e--;)g(t[e]);else if(i(t))for(n=Object.keys(t),e=n.length;e--;)g(t[n[e]])}function m(t,e,n,i){var o=r(e)?e:d(e);return new ut(t,o,n,i)}function k(t,e){var n=new ut(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),C.target&&n.depend(),n.value}}function O(t,e,n,i){return t.hasOwnProperty(q)||S(t),O.default(t,e,n,i)}function j(t,e){return e?e.hasOwnProperty(q)||S(e):e=Object.create(null),t.methods&&I(e,t.methods),t.data&&x(e,t.data),t.computed&&z(e,t.computed),t.watchers&&G(e,t.watchers),e}function _(t,n,i,o){t.hasOwnProperty(q)||S(t);var s=void 0,a=void 0;r(i)?(s=k(t,i),a=u):(s=i.get?o!==!1?k(t,i.get):i.get.bind(this):u,a=i.set?i.set.bind(this):u),e(t,n,s,a)}function D(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O;return t.hasOwnProperty(q)||S(t),m(t,e,n,i)}function S(e){t(e,q,[],!1),t(e,B,Object.create(null),!1),l(e[B]),A(e)}function I(t,e){o(e,function(e,n){t[e]=n.bind(t)})}function P(t,e,n){t[B][e]=n,h(t[B],e,n),E(t,e)}function x(t,e){o(e,function(e,n){return P(t,e,n)})}function A(t){o(t,function(e,n){!r(n)&&P(t,e,n)})}function z(t,e){o(e,function(e,n){return _(t,e,n)})}function G(t,e){o(e,function(e,n){r(n)?D(t,e,n):D(t,e,n.watcher,n)})}function E(t,n){function i(){return t[B][n]}function r(e){t[B][n]=e}e(t,n,i,r)}var N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T=(function(){function t(t){this.value=t}function e(e){function n(t,e){return new Promise(function(n,r){var s={key:t,arg:e,resolve:n,reject:r,next:null};u?u=u.next=s:(o=u=s,i(t,e))})}function i(n,o){try{var u=e[n](o),s=u.value;s instanceof t?Promise.resolve(s.value).then(function(t){i("next",t)},function(t){i("throw",t)}):r(u.done?"return":"normal",u.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":o.resolve({value:e,done:!0});break;case"throw":o.reject(e);break;default:o.resolve({value:e,done:!1})}o=o.next,o?i(o.key,o.arg):u=null}var o,u;this._invoke=n,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),$=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),M=0,C=function(){function t(){T(this,t),this.id=M++,this.subs=[]}return $(t,[{key:"addSub",value:function(t){this.subs.push(t)}},{key:"removeSub",value:function(t){this.subs.$remove(t)}},{key:"depend",value:function(){t.target.addDep(this)}},{key:"notify",value:function(){for(var t=this.subs,e=0,n=t.length;e<n;e++)t[e].update()}}]),t}();C.target=null;for(var F,V="__ob__",q="__watchers__",B="__data__",H="undefined"!=typeof process&&"production"!==process.env.NODE_ENV,J=Array.isArray,K=Object.prototype.toString,L="[object Object]",Q=H&&console&&r(console.warn)?console.warn:u,R=Array.prototype,U=Object.create(R),W=["push","pop","shift","unshift","splice","sort","reverse"],X=function(e,n,i){var r=R[i];t(U,i,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=r.apply(this,e),u=this[V],s=void 0;switch(i){case"push":s=e;break;case"unshift":s=e;break;case"splice":s=e.slice(2)}return s&&u.observeArray(s),u.dep.notify(),o})},Y=0,Z=W.length;Y<Z;F=W[++Y])X(Y,Z,F);t(R,"$set",a),t(R,"$remove",c),f.prototype.walk=function(t){var e=this;o(t,function(t,n){return e.convert(t,n)})},f.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)l(t[e])},f.prototype.convert=function(t,e){h(this.value,t,e)};var tt=[],et={},nt=!1,it=void 0,rt=function(){function t(){n=!1;var t=e.slice(0);e=[];for(var i=0;i<t.length;i++)t[i]()}var e=[],n=!1,i=void 0;if("undefined"!=typeof MutationObserver)!function(){var e=1,n=new MutationObserver(t),r=document.createTextNode(e);n.observe(r,{characterData:!0}),i=function(){e=(e+1)%2,r.data=e}}();else{var r="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),o=r?window:"undefined"!=typeof global?global:{};i=o.setImmediate||setTimeout}return function(r,o){var u=o?function(){r.call(o)}:r;e.push(u),n||(n=!0,i(t,0))}}(),ot=0,ut=function(){function t(e,n,i,r){T(this,t),e[q].push(this),this.owner=e,this.getter=n,this.callback=i,this.options=r,this.id=++ot,this.active=!0,this.dirty=r.lazy,this.deps=[],this.newDeps=[],this.depIds=Object.create(null),this.newDepIds=null,this.value=r.lazy?void 0:this.get()}return $(t,[{key:"get",value:function(){this.beforeGet();var t=this.owner,e=this.getter.call(t,t);return this.options.deep&&g(e),this.afterGet(),e}},{key:"beforeGet",value:function(){C.target=this,this.newDepIds=Object.create(null),this.newDeps.length=0}},{key:"addDep",value:function(t){var e=t.id;this.newDepIds[e]||(this.newDepIds[e]=!0,this.newDeps.push(t),this.depIds[e]||t.addSub(this))}},{key:"afterGet",value:function(){C.target=null;for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds[e.id]||e.removeSub(this)}this.depIds=this.newDepIds[(this.deps,this.newDeps)]=[this.newDeps,this.deps]}},{key:"update",value:function(){this.options.lazy?this.dirty=!0:this.options.sync?this.run():w(this)}},{key:"run",value:function(){if(this.active){var t=this.get();if(t!==this.value||i(t)||this.options.deep){var e=this.value;this.value=t,this.callback.call(this.owner,t,e)}}}},{key:"evaluate",value:function(){var t=C.target;this.value=this.get(),this.dirty=!1,C.target=t}},{key:"depend",value:function(){for(var t=this.deps.length;t--;)this.deps[t].depend()}},{key:"teardown",value:function(){if(this.active){for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1,this.owner=this.callback=this.value=null}}}]),t}();return O.default=j,O.deep=O.lazy=O.sync=!1,Object.setPrototypeOf(O,{react:j,compute:_,watch:D}),O});
//# sourceMappingURL=ob.min.js.map
