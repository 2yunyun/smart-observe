!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("observe",t):e.observe=t()}(this,function(){"use strict";function e(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function t(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}function n(e){return H.call(e)===J}function i(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":E(e))}function o(e){return"function"==typeof e}function r(e,t){for(var n=Object.keys(e),i=0,o=n.length;i<o;i++)t(n[i],e[n[i]])}function s(){}function u(e){Object.setPrototypeOf(e,U)}function a(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}function c(e){if(this.length){var t=this.indexOf(e);return t>-1?this.splice(t,1):void 0}}function f(e){if(e&&"object"===("undefined"==typeof e?"undefined":E(e))){var t=void 0;return Object.prototype.hasOwnProperty.call(e,C)&&e[C]instanceof ee?t=e[C]:(B(e)||n(e))&&Object.isExtensible(e)&&(t=new ee(e)),t}}function l(e,n,i){function o(){var t=a?a.call(e):i;if(M.target&&(s.depend(),l&&l.dep.depend(),B(t)))for(var n,o=0,r=t.length;o<r;o++)n=t[o],n&&n[C]&&n[C].dep.depend();return t}function r(t){var n=a?a.call(e):i;t!==n&&(c?c.call(e,t):i=t,l=f(t),s.notify())}var s=new M,u=Object.getOwnPropertyDescriptor(e,n);if(!u||u.configurable!==!1){var a=u&&u.get,c=u&&u.set,l=f(i);t(e,n,o,r)}}function h(e){try{return new Function("scope","return "+e+";")}catch(t){K("Invalid expression. Generated function body: "+e)}}function d(e){return e=String.prototype.trim.call(e),h("scope."+e)}function p(){te=[],ne={},ie=!1}function v(){y(te),p()}function y(e){for(oe=0;oe<e.length;oe++){var t=e[oe],n=t.id;ne[n]=null,t.run()}}function b(e){var t=e.id;null==ne[t]&&(ne[t]=te.length,te.push(e),ie||(ie=!0,re(v)))}function g(e){var t=void 0,n=void 0;if(B(e))for(t=e.length;t--;)g(e[t]);else if(i(e))for(n=Object.keys(e),t=n.length;t--;)g(e[n[t]])}function w(e,t,n,i){var r=o(t)?t:d(t);return new ue(e,r,n,i)}function m(e,t){var n=new ue(e,t,null,{deep:O.deep,lazy:!0,sync:O.sync});return function(){return n.options.lazy&&M.target&&!M.target.options.lazy&&(n.options.lazy=!1,n.callback=function(){for(var e=n.deps,t=0,i=e.length;t<i;t++)e[t].notify()}),n.dirty&&n.evaluate(),M.target&&n.depend(),n.value}}function O(e,t,n,i){return e.hasOwnProperty(F)||S(e),O.default(e,t,n,i)}function k(e,t){return t?t.hasOwnProperty(F)||S(t):(t={},S(t)),e.methods&&_(t,e.methods),e.data&&P(t,e.data),e.computed&&A(t,e.computed),e.watchers&&x(t,e.watchers),t}function j(e,n,i,r){e.hasOwnProperty(F)||S(e);var u=void 0,a=void 0;o(i)?(u=r!==!1?m(e,i):i.bind(this),a=s):(u=i.get?i.cache!==!1||r!==!1?m(e,i.get):i.get.bind(this):s,a=i.set?i.set.bind(this):s),t(e,n,u,a)}function D(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O;return e.hasOwnProperty(F)||S(e),w(e,t,n,i)}function S(t){e(t,F,[],!1),e(t,V,Object.create(null),!1),f(t[V]),z(t)}function _(e,t){r(t,function(t,n){e[t]=n.bind(e)})}function I(e,t,n){e[V][t]=n,l(e[V],t,n),G(e,t)}function P(e,t){r(t,function(t,n){return I(e,t,n)})}function z(e){r(e,function(t,n){!o(n)&&I(e,t,n)})}function A(e,t){r(t,function(t,n){return j(e,t,n)})}function x(e,t){r(t,function(t,n){o(n)?D(e,t,n):D(e,t,n.watcher,n)})}function G(e,n){function i(){return e[V][n]}function o(t){e[V][n]=t}t(e,n,i,o)}var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),$=0,M=function(){function e(){N(this,e),this.id=$++,this.subs=[]}return T(e,[{key:"addSub",value:function(e){this.subs.push(e)}},{key:"removeSub",value:function(e){this.subs.$remove(e)}},{key:"depend",value:function(){e.target.addDep(this)}},{key:"notify",value:function(){for(var e=this.subs,t=0,n=e.length;t<n;t++)e[t].update()}}]),e}();M.target=null;var C="__s_o__",F="__watchers__",V="__data__",q="undefined"!=typeof process&&"production"!==process.env.NODE_ENV,B=Array.isArray,H=Object.prototype.toString,J="[object Object]",K=void 0!==("undefined"==typeof q?"undefined":E(q))&&q&&"undefined"!=typeof console&&console&&o(console.warn)?console.warn:s,L=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?L=Set:(L=function(){this.set=Object.create(null)},L.prototype.has=function(e){return void 0!==this.set[e]},L.prototype.add=function(e){this.set[e]=1},L.prototype.clear=function(){this.set=Object.create(null)});for(var Q,R=Array.prototype,U=Object.create(R),W=["push","pop","shift","unshift","splice","sort","reverse"],X=function(t,n,i){var o=R[i];e(U,i,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=o.apply(this,t),s=this[C],u=void 0;switch(i){case"push":u=t;break;case"unshift":u=t;break;case"splice":u=t.slice(2)}return u&&s.observeArray(u),s.dep.notify(),r})},Y=0,Z=W.length;Y<Z;Q=W[++Y])X(Y,Z,Q);e(R,"$set",a),e(R,"$remove",c);var ee=function(){function t(n){N(this,t),this.value=n,this.dep=new M,e(n,C,this),B(n)?(u(n),this.observeArray(n)):this.walk(n)}return T(t,[{key:"walk",value:function(e){var t=this;r(e,function(e,n){return t.convert(e,n)})}},{key:"observeArray",value:function(e){for(var t=0,n=e.length;t<n;t++)f(e[t])}},{key:"convert",value:function(e,t){l(this.value,e,t)}}]),t}(),te=[],ne={},ie=!1,oe=void 0,re=function(){function e(){n=!1;var e=t.slice(0);t=[];for(var i=0;i<e.length;i++)e[i]()}var t=[],n=!1,i=void 0;if("undefined"!=typeof MutationObserver)!function(){var t=1,n=new MutationObserver(e),o=document.createTextNode(t);n.observe(o,{characterData:!0}),i=function(){t=(t+1)%2,o.data=t}}();else{var o="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),r=o?window:"undefined"!=typeof global?global:{};i=r.setImmediate||setTimeout}return function(o,r){var s=r?function(){o.call(r)}:o;t.push(s),n||(n=!0,i(e,0))}}(),se=0,ue=function(){function e(t,n,i,o){N(this,e),t[F].push(this),this.owner=t,this.getter=n,this.callback=i,this.options=o,this.id=++se,this.active=!0,this.dirty=o.lazy,this.deps=[],this.newDeps=[],this.depIds=new L,this.newDepIds=new L,this.value=o.lazy?void 0:this.get()}return T(e,[{key:"get",value:function(){this.beforeGet();var e=this.owner,t=this.getter.call(e,e);return this.options.deep&&g(t),this.afterGet(),t}},{key:"beforeGet",value:function(){M.target=this}},{key:"addDep",value:function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))}},{key:"afterGet",value:function(){M.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0}},{key:"update",value:function(){this.options.lazy?this.dirty=!0:this.options.sync?this.run():b(this)}},{key:"run",value:function(){if(this.active){var e=this.get();if(e!==this.value||i(e)||this.options.deep){var t=this.value;this.value=e,this.callback.call(this.owner,e,t)}}}},{key:"evaluate",value:function(){var e=M.target;this.value=this.get(),this.dirty=!1,M.target=e}},{key:"depend",value:function(){for(var e=this.deps.length;e--;)this.deps[e].depend()}},{key:"teardown",value:function(){if(this.active){for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.owner=this.callback=this.value=null}}}]),e}();return O.default=D,O.deep=O.lazy=O.sync=!1,Object.setPrototypeOf(O,{react:k,compute:j,watch:D}),O});
//# sourceMappingURL=smart-observe.min.js.map
